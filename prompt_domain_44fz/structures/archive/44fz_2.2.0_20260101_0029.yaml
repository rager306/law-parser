# 44-ФЗ Structure Specification
# Version: 2.0.0
# Last Updated: 2025-12-31
# Source: ConsultantPlus export (44-FZ.xml)
#
# ВАЖНО: Иерархия структуры документа:
#   Глава → [Параграф] → Статья → Часть → Пункт → Подпункт
# Параграфы (§) присутствуют ТОЛЬКО в Главе 3.

metadata:
  law_id: "44-ФЗ"
  name: "О контрактной системе в сфере закупок товаров, работ, услуг для обеспечения государственных и муниципальных нужд"
  number: "44-ФЗ"
  date: "2013-04-05"
  effective_date: "2014-01-01"
  last_amendment: "2024-12-26"
  document_type: federal_law
  structure_type: hierarchical
  primary_language: ru
  source_format: consultantplus_xml

  # Иерархия структуры
  hierarchy:
    description: "Глава → [Параграф] → Статья → Часть → Пункт → Подпункт"
    levels:
      - name: "Глава"
        marker_ru: "Глава"
        optional: false
        count: 8
      - name: "Параграф"
        marker_ru: "§"
        optional: true  # Только в Главе 3
        count: 9
      - name: "Статья"
        marker_ru: "Статья"
        optional: false
        count: 94
      - name: "Часть"
        marker_pattern: '^\d+\.\s'
        optional: true
      - name: "Пункт"
        marker_pattern: '^\d+\)\s'
        optional: true
      - name: "Подпункт"
        marker_pattern: '^[а-яё]\)\s'
        optional: true

# Паттерны для парсинга структуры
structure_markers:
  # Главы
  chapter:
    pattern: 'Глава (\d+)\.\s+([А-ЯЁ][А-ЯЁ\s,()]+)'
    examples:
      - "Глава 1. ОБЩИЕ ПОЛОЖЕНИЯ"
      - "Глава 3. ОСУЩЕСТВЛЕНИЕ ЗАКУПОК"
    html_entity: null

  # Параграфы (только в Главе 3)
  paragraph:
    pattern: '§\s*(\d+(?:\.\d+)?)\.\s*([^§Г]+?)(?=Статья|\Z)'
    html_entity: '&#167;'  # В XML файлах символ § кодируется как &#167;
    note: "Параграфы встречаются ТОЛЬКО в Главе 3 (ОСУЩЕСТВЛЕНИЕ ЗАКУПОК)"
    examples:
      - "§ 1. Общие положения"
      - "§ 2. Определение поставщика путем проведения конкурсов"
      - "§ 3.1. Определение поставщика..."

  # Статьи
  article:
    pattern: 'Статья (\d+(?:\.\d+)?)\.\s*([А-ЯЁ][^§Г]+?)(?=Статья \d|Глава \d|§ \d|\Z)'
    examples:
      - "Статья 1. Сфера применения настоящего Федерального закона"
      - "Статья 24.1. Особенности проведения электронных процедур"
      - "Статья 110.2. Особенности заключения контракта"

  # Части статей
  part:
    pattern: '^(\d+)\.\s+(.+)'
    description: "Части нумеруются арабскими цифрами с точкой: 1., 2., 3."
    examples:
      - "1. Настоящий Федеральный закон регулирует..."
      - "2. Настоящий Федеральный закон не применяется..."
    count_in_doc: 279  # Примерное количество

  # Пункты
  clause:
    pattern: '^(\d+(?:\.\d+)?)\)\s+(.+)'
    description: "Пункты нумеруются цифрой со скобкой: 1), 2), 3). Возможна составная нумерация: 1.1), 1.2)"
    examples:
      - "1) в описании объекта закупки указываются..."
      - "2) если указанные материалы производятся..."
      - "1.1) при проведении конкурсов..."
    note: "Составная нумерация (1.1, 1.2) встречается редко, например в статье 95"
    count_in_doc: 247

  # Подпункты
  subclause:
    pattern: '^([а-яё])\)\s+(.+)'
    description: "Подпункты - строчные буквы кириллицы со скобкой: а), б), в)"
    examples:
      - "а) сопровождение указания словами \"или эквивалент\""
      - "б) указание на товарный знак..."
    letters_used: ["а", "б", "в", "г", "д", "е", "ж", "з", "и"]
    count_in_doc: 66

# Маркеры недействующих норм
invalidity_markers:
  - pattern: "утратила силу"
    type: "full_invalidation"
  - pattern: "утратил силу"
    type: "full_invalidation"
  - pattern: "признана утратившей силу"
    type: "full_invalidation"
  - pattern: "не применяется"
    type: "non_applicable"
  - pattern: "утратило силу с"
    type: "dated_invalidation"
    date_pattern: '\d{2}\.\d{2}\.\d{4}'

# Структура документа: 8 глав
chapters:
  - id: chapter_1
    number: 1
    name: "ОБЩИЕ ПОЛОЖЕНИЯ"
    paragraphs: []  # Нет параграфов
    articles: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
    note: "Статья 13 утратила силу"

  - id: chapter_2
    number: 2
    name: "ПЛАНИРОВАНИЕ"
    paragraphs: []
    articles: [16, 17, 18, 19, 20, 21, 22, 23]
    note: "Статьи 17 и 21 утратили силу"

  - id: chapter_3
    number: 3
    name: "ОСУЩЕСТВЛЕНИЕ ЗАКУПОК"
    has_paragraphs: true
    paragraphs:
      - id: paragraph_1
        number: "1"
        name: "Общие положения"
        articles: [24, 24.1, 24.2, 25, 26, 27, 28, 29, 30, 30.1, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47]

      - id: paragraph_2
        number: "2"
        name: "Определение поставщика путем проведения открытых конкурентных способов"
        articles: [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71]
        note: "Многие статьи утратили силу"

      - id: paragraph_3
        number: "3"
        name: "Определение поставщика путем проведения закрытых конкурентных способов"
        articles: [72, 73, 74, 75, 76, 77]

      - id: paragraph_3_1
        number: "3.1"
        name: "Определение поставщика путем проведения запроса котировок в электронной форме"
        articles: [78, 79, 80, 81, 82]
        note: "Исторический параграф, многие статьи утратили силу"

      - id: paragraph_4
        number: "4"
        name: "Определение поставщика путем проведения запроса предложений"
        articles: [83, 84, 85, 86, 87, 88]

      - id: paragraph_4_1
        number: "4.1"
        name: "Заключение контракта по результатам"
        articles: [89, 90, 91, 92]

      - id: paragraph_5
        number: "5"
        name: "Закрытые способы определения поставщиков"
        articles: []
        note: "Статьи перенесены в параграф 3"

      - id: paragraph_6
        number: "6"
        name: "Осуществление закупки у единственного поставщика"
        articles: [93]

      - id: paragraph_7
        number: "7"
        name: "Исполнение, изменение, расторжение контракта"
        articles: [94, 95, 96]
    articles: []  # Статьи распределены по параграфам

  - id: chapter_4
    number: 4
    name: "МОНИТОРИНГ ЗАКУПОК И АУДИТ В СФЕРЕ ЗАКУПОК"
    paragraphs: []
    articles: [97, 98]

  - id: chapter_5
    number: 5
    name: "КОНТРОЛЬ В СФЕРЕ ЗАКУПОК"
    paragraphs: []
    articles: [99, 100, 101, 102, 103, 104]

  - id: chapter_6
    number: 6
    name: "ОБЖАЛОВАНИЕ ДЕЙСТВИЙ (БЕЗДЕЙСТВИЯ) СУБЪЕКТОВ КОНТРОЛЯ"
    paragraphs: []
    articles: [105, 106, 107]

  - id: chapter_7
    number: 7
    name: "ОСОБЕННОСТИ ОСУЩЕСТВЛЕНИЯ ОТДЕЛЬНЫХ ВИДОВ ЗАКУПОК"
    paragraphs: []
    articles: [108, 109, 110, 110.1, 110.2, 111, 111.1, 111.2, 111.3, 111.4]

  - id: chapter_8
    number: 8
    name: "ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ"
    paragraphs: []
    articles: [112, 113, 114]

# Статистика
summary:
  total_chapters: 8
  total_paragraphs: 9
  total_articles: 94
  chapters_with_paragraphs: [3]
  largest_chapter: 3  # ОСУЩЕСТВЛЕНИЕ ЗАКУПОК

  # Недействующие нормы (проверено 2025-12-31)
  invalid_articles:
    fully_invalid_count: 10
    fully_invalid_list: ["13", "17", "21", "30.1", "60", "61", "62", "70", "71", "109"]
    partially_invalid_count: 24
    note: "Полностью утратившие силу vs статьи с частично недействующими частями"

  # Парсер валидация (2025-12-31)
  parser_validation:
    validated: true
    performance_sec: 0.357
    performance_limit_sec: 5.0
    cli_tested: true
    notes: "Статья 95 может ложно определяться как invalid (содержит invalid clauses)"

# Версионирование
version: "2.2.0"
last_updated: "2026-01-01"
changelog:
  - version: "2.2.0"
    date: "2026-01-01"
    changes:
      - "Удалён несуществующий уровень 'подчасти' (subpart)"
      - "Составная нумерация (1.1, 1.2) перенесена в раздел 'пункты' (clause)"
      - "Исправлен паттерн пунктов для поддержки составной нумерации"
  - version: "2.1.0"
    date: "2025-12-31"
    changes:
      - "Уточнён подсчёт недействующих статей: 10 полностью, 24 частично"
      - "Добавлен список полностью утративших силу статей"
  - version: "2.0.0"
    date: "2025-12-31"
    changes:
      - "Полностью переработана структура на основе ручного анализа XML"
      - "Добавлена иерархия: Глава → Параграф → Статья → Часть → Пункт → Подпункт"
      - "Добавлены паттерны парсинга для всех уровней"
      - "Добавлена информация о HTML entity для § (&#167;)"
      - "Добавлены маркеры недействующих норм"
  - version: "1.1.0"
    date: "2025-12-31"
    changes:
      - "Первоначальная версия с базовой структурой"
