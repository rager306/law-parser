# üìò 2. PRODUCT REQUIREMENTS DOCUMENT (PRD)

> üìÅ **–§–∞–π–ª:** `LDUP_PRD_v1.0.md`

---

## 1. Product Overview

**–ù–∞–∑–≤–∞–Ω–∏–µ:** Legal Document Universal Parser (LDUP)
**–¶–µ–ª—å:**
–°–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä, —Å–ø–æ—Å–æ–±–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Å–µ–º–∞–Ω—Ç–∏–∫—É –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ç–æ–≤ –†–§ –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —É—á–∞—Å—Ç–∏–µ–º LLM.

---

## 2. Key Objectives

| ‚Ññ | –¶–µ–ª—å                                                                | KPI                               |
| - | ------------------------------------------------------------------- | --------------------------------- |
| 1 | –°–æ–∫—Ä–∞—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–æ ‚â§20%                                 | llm_usage_rate < 0.2              |
| 2 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≥–ª–∞–≤–∞, —Å—Ç–∞—Ç—å—è, –ø—É–Ω–∫—Ç) | 95% accuracy                      |
| 3 | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–µ–π—Å—Ç–≤–∏—è –Ω–æ—Ä–º                        | 90% accuracy                      |
| 4 | –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ—Ä–º (–æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –ø—Ä–∞–≤–æ, –∑–∞–ø—Ä–µ—Ç)      | 85% accuracy                      |
| 5 | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ LegalTech —Ñ–æ—Ä–º–∞—Ç—ã         | Akoma Ntoso, LegalRuleML          |
| 6 | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ø–æ–¥ –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç—ã                | Plugin-based ingestion            |
| 7 | –°–∞–º–æ–æ–±—É—á–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ feedback                                    | Œî accuracy +5% –ø–æ—Å–ª–µ 3 —Ü–∏–∫–ª–æ–≤ SRC |

---

## 3. Scope of Work

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤: WordML 2003, DOCX, RTF, HTML, PDF, TXT.
* –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–∞—Ä—Å–∏–Ω–≥–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–∑–µ–ª DSPy Graph.
* –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã: AKN, LegalRuleML, MetaLex, LegalDocML-RU, NormML.
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangGraph –∏ FalkorDB Temporal Graph.
* –û—Ç–¥–µ–ª—å–Ω—ã–µ YAML-–æ–ø–∏—Å–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∏ —á–∞—Å—Ç–Ω—ã–µ).

---

## 4. Token Efficiency Strategy (Rule-First)

| –≠—Ç–∞–ø                        | –ü–æ–¥—Ö–æ–¥                             | LLM –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| --------------------------- | ---------------------------------- | ----------------- |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (GEPA)            | –ü—Ä–∞–≤–∏–ª–∞ –∏ XML-–ø–∞—Ç—Ç–µ—Ä–Ω—ã             | 0                 |
| –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è (SIMBA)          | –ú–æ—Ä—Ñ–æ–∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è | 0                 |
| –°–µ–º–∞–Ω—Ç–∏–∫–∞ (SIMBA + RuleSet) | –°–∏–º–≤–æ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞                 | 0                 |
| –¢–µ–º–ø–æ—Ä–∞–ª—å–Ω–æ—Å—Ç—å (MiPROv2)    | –†–µ–≥—É–ª—è—Ä–∫–∏ + bi-temporal API        | 0                 |
| –ö—Ä–æ—Å—Å-—Å—Å—ã–ª–∫–∏ (TCGR)         | –ì—Ä–∞—Ñ–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã                   | 0                 |
| –ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏ (LLM)   | Prompt-based inference             | ‚â§ 20%             |
| –°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ (SRC)          | Feedback + Policy Adjustment       | -                 |

---

## 5. YAML Skill System

* **General Skill YAML:**
  –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ—Ö –ù–ü–ê (–≥–ª–∞–≤—ã, —Å—Ç–∞—Ç—å–∏, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏, —Ç–∏–ø—ã –Ω–æ—Ä–º).
* **Private Skill YAML:**
  –°–æ–¥–µ—Ä–∂–∏—Ç —á–∞—Å—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∞–∫—Ç–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
* **Skill Schema:**
  –ê–Ω–∞–ª–æ–≥ Anthropic Skill Format (–Ω–∞–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–∏–ø–æ–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–∞–≤–∏–ª —Ä–∞–∑–º–µ—Ç–∫–∏).

---

## 6. Self-Learning Loop

1. DSPy Graph –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ.
2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ **SRC v2**.
3. SRC —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSONL feedback:

   ```json
   {"error": "missed temporal interval", "fix": "add regex '—É—Ç—Ä–∞—Ç–∏–ª —Å–∏–ª—É'"}
   ```
4. GEPA/SIMBA –æ–±–Ω–æ–≤–ª—è—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –≤ YAML –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
5. –°–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ–ª—è LLM-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö.

---

## 7. Outputs

* **Akoma Ntoso XML**
* **LegalRuleML XML**
* **NormML JSON**
* **MetaLex ID map**
* **Temporal Graph (FalkorDB + Graffiti)**

---

## 8. Constraints

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è          | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ                                                |
| ------------------ | ---------------------------------------------------------- |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç           | –î–æ 2048 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ LLM –≤—ã–∑–æ–≤ (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω)                |
| –ò—Å—Ç–æ—á–Ω–∏–∫–∏          | –¢–æ–ª—å–∫–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ (–±–µ–∑ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö PDF –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ) |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚â§5 —Å–µ–∫/—Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ–∫—É–º–µ–Ω—Ç–∞                                  |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å      | Python 3.13+, DSPy 3.0.4, FalkorDB SDK ‚â• 2.1               |

---

## 9. Success Criteria

| –ú–µ—Ç—Ä–∏–∫–∞             | –¶–µ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
| ------------------- | ---- | ------------------------------------------ |
| Structural Accuracy | ‚â•95% | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏          |
| Temporal Extraction | ‚â•90% | –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–µ–π—Å—Ç–≤–∏—è              |
| Token Efficiency    | ‚â•80% | –î–æ–ª—è rule-based —à–∞–≥–æ–≤                      |
| LLM Assist Accuracy | ‚â•85% | –ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π |
| Export Validity     | 100% | XML –≤–∞–ª–∏–¥–µ–Ω –ø–æ AKN –∏ LegalRuleML —Å—Ö–µ–º–∞–º    |

---

## 10. Future Extensions

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö –∞–∫—Ç–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (2027).
* –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –∞–∫—Ç—ã (WTO, ISO, UN).
* –û–±–æ–≥–∞—â–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —á–µ—Ä–µ–∑ RAG –¥–ª—è —é—Ä. QA —Å–∏—Å—Ç–µ–º.
* Multilingual expansion (EN/DE/CN).

---

‚úÖ **–†–µ–∑—é–º–µ:**
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ LDUP –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é, —ç–∫–æ–Ω–æ–º–∏—á–Ω—É—é –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∞–≤–æ–≤—ã—Ö –∞–∫—Ç–æ–≤ —Å –≥–∏–±—Ä–∏–¥–Ω–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.
LLM –≤—ã—Å—Ç—É–ø–∞–µ—Ç –ª–∏—à—å –∫–∞–∫ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –≤ DSPy-–≥—Ä–∞—Ñ–µ –∏ YAML-–ø—Ä–∞–≤–∏–ª–∞—Ö.

---

