# Требования к системе LDUP v5

## 1. Функциональные требования

### 1.1. Потоковая обработка (Streaming)
*   **FR-1.1.1:** Парсинг WordML документов до 500МБ при лимите RAM 512МБ (SAX/iterparse).
*   **FR-1.1.2:** Поддержка неймспейсов КонсультантПлюс (`w:`, `aml:`, `wx:`).

### 1.2. Рекурсивное управление знаниями (RLM)
*   **FR-1.2.1:** Генерация семантических «Кристаллов» (C³) для каждой статьи через рекурсивную суммаризацию.
*   **FR-1.2.2:** Фиксация связей изменений (Causal Links) через `parent_id` в локальном хранилище.

## 2. Нефункциональные требования

### 2.1. Надежность (Reliability)
*   **NFR-2.1.1:** Rate-limiting вызовов LLM API (библиотека `tenacity` с экспоненциальным backoff).
*   **NFR-2.1.2:** Fallback механизм: при недоступности основной модели переход на резервную (через универсальный интерфейс LiteLLM).
*   **NFR-2.1.3:** Защита рекурсии в TCGR: `max_depth` ограничена 10 уровнями.

### 2.2. Масштабируемость
*   **NFR-2.2.1:** Поддержка SQLite Read Replicas для параллельного поиска в многопользовательском режиме.
*   **NFR-2.2.2:** Версионирование алгоритма HCO Cache (SHA256 v1) для упрощения миграций.

## 3. Ограничения

*   **CPU-Only:** Работа без GPU (библиотека `fastembed` через ONNX Runtime).



## 4. Перспективы развития (Roadmap)

*Данный раздел описывает вектор развития архитектуры и не является обязательным для текущей реализации MVP.*



*   **Agentic System Integration:** Проектирование парсера как автономного агента/инструмента, способного работать в составе мультиагентных систем.

*   **Knowledge Graph Evolution:** Использование результатов парсинга для формирования динамических онтологий.

*   **Temporal Graph RAG:** Импорт извлеченных знаний в специализированные графовые базы данных (TemporalDB) с поддержкой:

    *   **NLP-модулей:** Для глубокого лингвистического анализа юридических норм.

    *   **Schema-генерации:** Автоматическое построение схем данных на основе структуры закона.

    *   **Графовой сериализации:** Преобразование иерархии RLM в связанные графовые структуры.

    *   **RAG-индексации:** Глобальное индексирование графа для точного поиска по контексту изменений.
